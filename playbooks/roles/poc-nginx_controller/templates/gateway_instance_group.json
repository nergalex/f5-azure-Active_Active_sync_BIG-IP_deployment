{
  "metadata": {
    "name": "gw_{{extra_app.name | lower}}",
    "displayName": "Gateways {{extra_app.name | lower}}",
    "description": "Generated by CMP"
  },
  "desiredState": {
    "ingress": {
      {%- if var_tls_enabled is defined and var_tls_enabled -%}
      "tls": {
        "certRef": {
          "ref": "/services/environments/{{ var_env_prefix }}{{ extra_app.environment | lower }}/certs/crt_{{ extra_app.name | lower }}"
        }
      },
      {%- endif -%}
      "uris": {
      {%- if var_tls_enabled is defined and var_tls_enabled %}
        "https://{{extra_app.name | lower}}.{{extra_app.domain | lower}}": {
      {%- else %}
        "http://{{extra_app.name | lower}}.{{extra_app.domain | lower}}": {
      {%- endif %}
          "matchMethod": "EXACT"
        }
      },
      "placement": {
        "instanceGroupRefs": [
          {
            "ref": "/infrastructure/instance-groups/{{ var_instance_group }}"
          }
        ]
      }
    }
  }
}
