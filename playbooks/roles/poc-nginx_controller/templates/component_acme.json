{
  "metadata": {
    "name": "acme",
    "displayName": "Lets Encrypt challenge",
    "description": "Generated by CMP",
    "tags": [
      "ACME"
    ]
  },
  "desiredState": {
    "ingress": {
      "gatewayRefs": [
        {
          "ref": "/services/environments/{{ var_env_prefix }}{{extra_app.environment | lower}}/gateways/gw_{{extra_app.name | lower}}"
        }
      ],
      "uris": {
        "/{{ stats_acme_http_challenge.resource }}": {
          "matchMethod": "EXACT"
        }
      }
    },
    "backend": {
      "workloadGroups": {
        "wlg_localhost": {
          "loadBalancingMethod": {
            "type": "LEAST_CONNECTIONS"
          },
          "uris": {
            "http://127.0.0.1": {
              "isBackup": false,
              "isDown": false,
              "isDrain": false
            }
          }
        }
      },
      "ntlmAuthentication": "DISABLED",
      "preserveHostHeader": "DISABLED"
    },
    "programmability": {
      "requestHeaderModifications": [
        {
          "action": "ADD",
          "headerName": "Content-Type",
          "headerValue": "text/plain"
        }
      ]
    },
    "logging": {
      "errorLog": "ENABLED",
      "accessLog": {
        "state": "ENABLED"
      }
    },
    "configSnippets": {
      "uriSnippets": [
        {
          "directives": [
            {
              "directive": "return",
              "args": [
                "200",
                "{{ stats_acme_http_challenge.resource_value }}"
              ]
            }
          ]
        }
      ]
    },
    "security": {
      "waf": {
        "isEnabled": false,
        "isMonitorOnly": false,
        "signatureOverrides": {}
      },
      "strategyRef": {
        "ref": "/security/strategies/balanced_default"
      }
    }
  }
}